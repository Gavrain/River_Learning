# 个性化地点推荐算法

个性化地点推荐算法的分类可以分为三类：**基于协同过滤的算法**，矩阵特征化的方法，基于随机行走的方法
。其中，基于协同过滤的推荐算法应用最广泛，主要方法是根据目标用户的历史签到记录来预测目标用户对待推荐地点的兴趣程度，研究表明，基于协同过滤的推荐更适合应用与 LBSN 中。

LBSN 的地点推荐中，影响推荐的因素有**用户兴趣、社交关系、位置影响**。分别介绍了现有文献中考虑这三种因素的地点推荐算法’

LBSN 的地点推荐中，影响推荐的因素有用户兴趣、社交关系、位置影响。本章分别介绍了现有文献中考虑这三种因素的地点推荐算法。**本章 3.1 节介绍了只考虑用户兴趣的推荐算法**：基于用户的协同过滤推荐算法；3.2 节介绍了考虑**用户偏好和位置影响的推荐算法**；3.3 节介绍了考虑了**用户社交关系的推荐算法：**H-CF

###**3.1 基于用户的协同过滤推荐算法 UBCF**

基于用户的协同过滤推荐算法是目前推荐中的主流算法，很多电子商务网站的推荐系统采用了这种算法。基于用户的协同过滤算法依据的是邻居用户的偏好或者记录，对目标用户预测兴趣度与推荐，这种算法不仅计算简单而且精确度较高。其核心在于找出目标用户的最近邻居用户，根据最近邻居用户的评分结果给目标用户做出推荐。将基于用户的协同过滤推荐算法应用到地点推荐的详细过程举例如下：

如表 3-1 所示，表示用户对地点的签到情况，表中 0 表示未对该地签到。1 表示用户对该地点有签到记录，用户集合 U={A,B,C,D}，地点集合 L={a,b,c,d,e,f}。

![1542598228262](../../../../../AppData/Local/Temp/1542598228262.png)

将用户 A 视为目标用户，对用户 A 推荐的具体步骤为：

**1）计算用户的相似度**：
用户相似度的计算方法在第二章已经详细说明，这里使用的相似性度量方法是余弦
相似度，计算公式为公式 3-1：

![1542598263370](../../../../../AppData/Local/Temp/1542598263370.png)

其中，$S_{uv} $表示用户 u 和用户 v 的相似度，$L_{uv} $表示用户 u 和用户 v 有共同签到记录的地点集合，$L_u $
和 Lv 分别表示用户 u 和用户 v 各自的签到记录的地点集合，rui表示用户 u是否在地点 i 有签到记录，rvi 表示用户 v 是否在地点 i 有签到记录。通过相似度计算，目标用户与其他三个用户的相似度如表 3-2 所示：

![1542599584727](../../../../../AppData/Local/Temp/1542599584727.png)

计算出用户之间的相似度之后，选取前 N 个相似的用户作为目标用户的邻居用户。从表中可以得知，与用户 A 相似的用户排序为用户 D，用户 B。这里，我们选两个用户作为邻居用户，构成用户集合 U'，U'={B,D}，且 U'⊂U。

**2）计算用户对待推荐地点的兴趣度**

计算出目标用户的邻居用户之后，要对目标用户没有签到过的地点计算兴趣度，如
公式 3-2 所示：

![1542599926134](../../../../../AppData/Local/Temp/1542599926134.png)

其中，$S_{uv}$、$r_{vi}$ 与公式 3-1 中含义一致，$w_{ui}$表示用户 u 对地点 i 的兴趣程度，也可以认为是将地点 i 推荐给用户 u 的可能性。通过计算，将地点 c、d、e 受到用户 A 的兴趣的程度如下表 3-3：

![1542629204047](../../../../../AppData/Local/Temp/1542629204047.png)

3）对待推荐地点排序
从待推荐地点的推荐概率表中将待推荐地点按照 Top-N 排序，将前 N 个地点推荐给用户。从表中可以看出，目标用户去地点 c 和 d 的可能性要大于去地点 e 的可能性。

### 3.2 基于位置感知的推荐方法 LARS

​    LARS[19]（A Location-aware Recommender System），是一个位置感知的推荐系统，通过使用地点的位置信息来产生推荐。不同地区的用户会有不同的兴趣爱好，考虑到地点推荐中加入了位置属性，所以合理利用地点的位置信息，在推荐中向用户推荐离用户较近的地点，可以有效提高推荐的准确性。

　　提出了一种位置感知的推荐方法，该方法结合了用户的偏好性以及位置区域性的特征来产生推荐，将该方法利用到地点推荐中，信息由四元组（用户，签到记录，地点，地点位置）来表示，通过距离惩罚离用户较远的地点的方式限制用户选择签到的地点，实现区域性的推荐。

　　推荐系统首先忽略地点的位置属性，由传统的基于用户的协同过滤推荐方法来生成用户 u 对地点 i 的兴趣度，再通过距离惩罚的方式改变用户 u 对地点 i 的最终兴趣度。计算公式为公式 3-3：

![1542629825794](../../../../../AppData/Local/Temp/1542629825794.png)

其中，p(u,i)表示协同过滤推荐得到的用户 u 对地点 i 的初始兴趣度，Travel Penalty(u,i)表示用户 u 到地点 i 的旅行代价。计算 Travel Penalty(u,i)的基本思想[19]是对地点 i 和用户u 签到记录中所有地点的位置计算距离的平均值，然后将得到的平均值进行归一化处理。

## 3.3 融合相似性和好友信任的地点推荐算法 H-CF

考虑用户的社交关系的算法

　　H-CF[46]（hybrid collaborative filtering）算法是一种融合了**相似性和好友信任的地点**推荐算法，该算法是 F-CF[46]（friendship-based collaborative filtering）算法与 F-Trust[46]（friends’ trust）算法的融合。F-CF 算法是结合好友关系寻找与目标用户有相似爱好的邻居用户，F-Trust 算法利用目标用户的好友列表中寻找值得信任的用户从而产生推荐结果。

#### 3.3.1 F-CF 算法

　　一般，LBSN 中的用户的签到记录由于数据稀疏的原因导致传统的协同过滤产生的地点推荐值出现相等的情况，无法更好的为用户推荐。考虑到实际生活中用户更加愿意接受好友的推荐，F-CF 算法加入用户的好友从而改进了对地点的推荐值

基于用户的协同过滤推荐算法计算出将地点 i 推荐给目标用户的推荐值为 $IR＿{ui}$，定义地点 i 的好友推荐权重ωi 的公式为 3-4

![1542631047160](../../../../../AppData/Local/Temp/1542631047160.png)

其中，f 和 $f_i$ 分别表示用户 u 的好友数目和在地点 i 签到过的好友数目。将待推荐的地点推荐给目标用户的推荐值改为公式 3-5：

![1542631199680](../../../../../AppData/Local/Temp/1542631199680.png)

最后将 IRui'的值按照 Top-N 的排序方法，给目标用户推荐前 N 个地点。

####3.3.2 F-Trust 算法

F-Trust 算法将好友的可信程度考虑在内，Konstas I 等提出社交影响因子（socialinfluence factor）与共同好友数目有关[33]。所以定义了用户 u 和用户 v 的熟悉程度$ SI_{uv}$如公式 3-6 所示：

![1542631355540](../../../../../AppData/Local/Temp/1542631355540.png)

其中，$F_u$ 和 $F_v $分别表示用户 u 和用户 v 的好友集合。

再用第二章提到的相似性度量方法计算得到用户 u 与用户 v 的相似度 Suv，那么，用户 u 与用户 v 之间的可信度为公式 3-7：
![1542631486047](../../../../../AppData/Local/Temp/1542631486047.png)

其中，μ是一个调节参数，取值在[0,1]之间，表示社交影响因子与好友相似度之间的比例平衡。最终对目标用户 u 推荐未签到地点 i 的推荐值 TR 表示为公式 3-8：

![1542631703880](../../../../../AppData/Local/Temp/1542631703880.png)

其中：L 表示用户 u 未签到过的地点的集合，$c_{vi}$表示用户 v 在地点 i 的签到次数

#### 3.3.3 H-CF 算法

H-CF 算法将 F-CF 算法与 F-Trust 算法结合，同时考虑了用户间的相似性和可信程度。对于一个目标用户 u
，将其他用户分为好友集合 F 和非好友集合 NF。对于好友集合中的用户采用 F-Trust 算法，对于非好友集合中的用户采用 F-CF 算法，通过加权的方法，得到最终的地点推荐列表，计算公式为公式 3-9：

![1542631979286](../../../../../AppData/Local/Temp/1542631979286.png)

其中，L2' 和 L3' 分别表示针对集合 NF 采用的 F-CF 算法得到的待推荐地点集合和针对集合 F 采用的 F-Trust 算法得到的待推荐地点集合。η是一个可调参数，取值为[0,1]。







